/******************************************************************************
 * MinerTest.cpp
 *****************************************************************************/

#include <cstddef>
#include <cstdio>
#include <string>
#include <cstring>

#include "IotaCurlMiner.h" 

static bool doTestMiner(const std::string & in, const std::string & out, IotaCurlMiner & iotacurl, int difficulty)
{
    const std::string mined = iotacurl.iotaCurlProofOfWork(in, difficulty);
    fprintf(stdout, "Mined %d: \n", difficulty);
    fprintf(stdout, "in:    %s\n", in.c_str());
	fprintf(stdout, "out:   %s\n", out.c_str());
	fprintf(stdout, "mined: %s\n", mined.c_str());
    if (out != mined)
	{
		for (int i = 0; i < (int)out.size(); i++)
		{
			if (out[i] != mined[i])
			{
				fprintf(stderr, "Pos %d differ (%c vs %c)\n", i, out[i], mined[i]);
			}
		}
		fprintf(stderr, "Error: Does not match with expected output\n");
		return false;		
	}
	
	return true;
}
 
static bool shouldTransformTest() 
{
	static const long doTransResult[] = {0, 708, 912, 340, 2336, 2668, 2384, 3224, 3968, 52, 868, 472, 1012, 1352, 3916, 3820, 3868, 2712, 140, 480};

    static const int SIZE = 729;
    long state[SIZE];
    
	for (int i = 0; i<SIZE;i++) 
	{
        state[i] = (i << 2);
    }
	
	IotaCurlMiner iotacurl;
    iotacurl.doPowTransform(state, SIZE);

	fprintf(stdout, "Result:   ");
	for (size_t index = 0; index < sizeof(doTransResult) / sizeof(long); index++)
	{
		fprintf(stdout, "%ld ", state[index]);
	}
	fprintf(stdout, "\n");
	fprintf(stdout, "Expected: ");
	for (size_t index = 0; index < sizeof(doTransResult) / sizeof(long); index++)
	{
		fprintf(stdout, "%ld ", doTransResult[index]);
	}		
	fprintf(stdout, "\n");

	if (::memcmp(doTransResult, state, sizeof(doTransResult)) != 0)
	{
		fprintf(stderr, "Error: doPowTransform not match with expected output\n");		
		return false;
	}		
	
	return true;
}


int main(int argc, char * argv[])
{
	if (!shouldTransformTest())
	{
		return EXIT_FAILURE;				
    }
		
	{
		IotaCurlMiner iotacurl;
		const std::string in  = "XWGITHVPWBSPFRNQUEYLQETIVCJKRIIDKUZ9CSXBH9BKKUZCOGNLPKZXZHEGGPPWLMQHKDDAHZBSFQTNCOEJMSOLMHRPRHNWEUUAEHJURKTFWZQPSBOJGCJHWUPQSYKTVLVFKFMNQWQ9DJPBFJGXKKPYRDXDRYFBY9BIGHEYNTX9VGJTCIRVYIQHPCMCIESIUCGKMMIWHBLNC9BC9JR9CLYCPZTXPNQJOXPUDJUZEQTGWVOIEWCHPAY9EPZYCHFRQPHRZ9UZACWRJBSMRKBC9JJQSHJHPPEEYBFPHTZRGVVLJHDZ9JGLXJARNHMLWIYSUXNXRALYCMPMYOAMCKWHKNNWZPYNFTOUQORGVJRTVUYG9MX9DHLGHXFATETWQJUFPL9FLVRKEXDMVWQJOLTIXHJKBDGAJPJAHPQHT9TMWIL9QNIUQ9FBIIFDA9GUPVKXRPDRHG9IAHPJI9JRMTBJYOGVP9HZM9PNWXNFKKBSFQCOEDPDAUNEZRAYCAMBZBDVTDCANUNGZTAOAXFEUMQMSCOQF9EEVXXTXEB9IVY9DVGHBEXHMDHGJXUMIDIDIPDIAPAOGEKLVBTUFTFRRSKSAXTONHVCLGYOUUKORNGKABDQBTDSPZOWK9QD9VCKTOGMYGIHZ9YT9WYHDONULDLLSILTEUGRLKRAQFXAXNDRGECKTAERXMYOMDADLSPIVLWWNMQQBY9FHRB9LOKZNVUNVHT9I9IOLGHXOTBGAVNMR9QFCDPLDGVFGTLAEOEIDXAPSFNHJIBLMXEDLQQBGEUYKLMKRGVFFJ9AFEFILQBRWHWOOVECRMRQTSEIUHDGXRJFVZXBXSTMQA9KDIEUF9HZXYRZVZYVVEPSKDGEYWBVSEVMUDJSGYIHTPNSPWWDFII9VHAPTJHWXOWTWWSVEEKIXXUPRTTIIOEOQHHROGJIZ9Y9DSQRUVDTDHFBZMIAFTYOBJUBCOFMDTOVDWRSGCIEE9YKJCTJFZGLTFNZHNNPSKDHZZUCNDSJN9RBUOR9MYHNVLTZR9ZPHLCGXUOMGLRXCNKYMPKUFITURZCHHRKNGUZHWV9EQGNEBEXPMIRAZC9JMQL9BMDWK9NXRDEVUETPKINKDQNIJ9GJNQZJEPBDIVBJIXQWYAZCMEKFD9RFA9HUXCUBHAAVPOBRVFXRNEXDNTAIFTYEZADSWMXWEHSUKDVCCMATIDCIOFUVQYNMOXKVIDNXLGUCKQN9WVJDMHRXTHVRSHJTYFUOGKTSTDXYLM9EGYYUPMBA9JASZKKPDATFKNGLUD9IQLWFRPYQYSENKYIVXICCIOTATRVUSDKCYUA9JRUMSTMMBBHFZVCPJICNRGQZIGHEFGFMXV9VBMBMLEFJSGRDNBVODMLKCOIGDIYGCQCAUDJNVBFZGMFBV9TGOWKIFIPUOKIMJNQEBWPYVFXHCKOULMPMBN9QKWGXNM9HOJOSBJDNJJKDJWKJUWVAHNJIORACILRICNHQOQNAA9UIUTABUYOCRHLSNEKKF9BJZKX9VCAOPXOUGYFLWDZYXRVMHAXTCGJFQFOMJMSHRICSYVLSHKYWPTRLXMN9TTNBZLUTLXIDHUDTOIJAYPJ9I9JRFAHT9WOLXSJ9LOKCFXGQFZWJKNEJWURGSNBVCZYAUOBDVANKBTDCEU9W9JDIYAYVGPNGAF9WFFJL9NEYEPMJQLIMDWDVNRXOSZQAGISZIBUKTNDUHVNHOCQ9EIMWSKLREYSAKEVPUYZKMSCEGCRZVBNXXXJSEBSESONCZDNKVKSPSUUYBTDRVAIFGFYXKYRSBOFHYSQNYBQWPRQV99GBRNXWNHBEWTEECUTWPYCEGNQVBXDHLTFLVROOWHYX9TVGZVVFAZJZONCLNTEFZRBPCWPGPIKNQLQMZE9Q9CPPROOMR9QSRSRBSGMFMQ9NX9DNOOGSYRECEADHOVEBOBJTVARVDQYV9PHSDFFQODUISDRWUTAFLGQJNFIAOHOMBNPVTILCSMRTZUTPHYV9NGLXCJKKUPBOJDBDG9OSBCFHUJDXZBSBNLEKWCYPVINVRNWSDDMDPRTYHOSTSADVDRWEXPROSUYPVYNVKOBZDXUAKKVIJQKZE9JZN9EVUG9LTFDANQMUBRXBHAPL9USL9INWZCVCBFPKACSNYSOITLJAWIMCTNSCHQ9JZMYMPRGKQLABOLIEORLCNBJQMFMEAUONZMWKAT9ECRHNIRFSFRIHMGZISIJMOT9HLMOVUOGNTBXHHFZNGFLITAQRCAGBFBFOBBSTYSZMQPV99999999999999999999DOMIOTATESTWOW9999999999999PUPOYVD99A99999999C99999999MZWEZVBGFKSBSHDXAVGAJEUHCSKSRJSHCGRGGOKIPWMPTKSIHRFBEBWWYOSUGME9THEKAFFOORCRADGAK999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999";
		const std::string out = "XWGITHVPWBSPFRNQUEYLQETIVCJKRIIDKUZ9CSXBH9BKKUZCOGNLPKZXZHEGGPPWLMQHKDDAHZBSFQTNCOEJMSOLMHRPRHNWEUUAEHJURKTFWZQPSBOJGCJHWUPQSYKTVLVFKFMNQWQ9DJPBFJGXKKPYRDXDRYFBY9BIGHEYNTX9VGJTCIRVYIQHPCMCIESIUCGKMMIWHBLNC9BC9JR9CLYCPZTXPNQJOXPUDJUZEQTGWVOIEWCHPAY9EPZYCHFRQPHRZ9UZACWRJBSMRKBC9JJQSHJHPPEEYBFPHTZRGVVLJHDZ9JGLXJARNHMLWIYSUXNXRALYCMPMYOAMCKWHKNNWZPYNFTOUQORGVJRTVUYG9MX9DHLGHXFATETWQJUFPL9FLVRKEXDMVWQJOLTIXHJKBDGAJPJAHPQHT9TMWIL9QNIUQ9FBIIFDA9GUPVKXRPDRHG9IAHPJI9JRMTBJYOGVP9HZM9PNWXNFKKBSFQCOEDPDAUNEZRAYCAMBZBDVTDCANUNGZTAOAXFEUMQMSCOQF9EEVXXTXEB9IVY9DVGHBEXHMDHGJXUMIDIDIPDIAPAOGEKLVBTUFTFRRSKSAXTONHVCLGYOUUKORNGKABDQBTDSPZOWK9QD9VCKTOGMYGIHZ9YT9WYHDONULDLLSILTEUGRLKRAQFXAXNDRGECKTAERXMYOMDADLSPIVLWWNMQQBY9FHRB9LOKZNVUNVHT9I9IOLGHXOTBGAVNMR9QFCDPLDGVFGTLAEOEIDXAPSFNHJIBLMXEDLQQBGEUYKLMKRGVFFJ9AFEFILQBRWHWOOVECRMRQTSEIUHDGXRJFVZXBXSTMQA9KDIEUF9HZXYRZVZYVVEPSKDGEYWBVSEVMUDJSGYIHTPNSPWWDFII9VHAPTJHWXOWTWWSVEEKIXXUPRTTIIOEOQHHROGJIZ9Y9DSQRUVDTDHFBZMIAFTYOBJUBCOFMDTOVDWRSGCIEE9YKJCTJFZGLTFNZHNNPSKDHZZUCNDSJN9RBUOR9MYHNVLTZR9ZPHLCGXUOMGLRXCNKYMPKUFITURZCHHRKNGUZHWV9EQGNEBEXPMIRAZC9JMQL9BMDWK9NXRDEVUETPKINKDQNIJ9GJNQZJEPBDIVBJIXQWYAZCMEKFD9RFA9HUXCUBHAAVPOBRVFXRNEXDNTAIFTYEZADSWMXWEHSUKDVCCMATIDCIOFUVQYNMOXKVIDNXLGUCKQN9WVJDMHRXTHVRSHJTYFUOGKTSTDXYLM9EGYYUPMBA9JASZKKPDATFKNGLUD9IQLWFRPYQYSENKYIVXICCIOTATRVUSDKCYUA9JRUMSTMMBBHFZVCPJICNRGQZIGHEFGFMXV9VBMBMLEFJSGRDNBVODMLKCOIGDIYGCQCAUDJNVBFZGMFBV9TGOWKIFIPUOKIMJNQEBWPYVFXHCKOULMPMBN9QKWGXNM9HOJOSBJDNJJKDJWKJUWVAHNJIORACILRICNHQOQNAA9UIUTABUYOCRHLSNEKKF9BJZKX9VCAOPXOUGYFLWDZYXRVMHAXTCGJFQFOMJMSHRICSYVLSHKYWPTRLXMN9TTNBZLUTLXIDHUDTOIJAYPJ9I9JRFAHT9WOLXSJ9LOKCFXGQFZWJKNEJWURGSNBVCZYAUOBDVANKBTDCEU9W9JDIYAYVGPNGAF9WFFJL9NEYEPMJQLIMDWDVNRXOSZQAGISZIBUKTNDUHVNHOCQ9EIMWSKLREYSAKEVPUYZKMSCEGCRZVBNXXXJSEBSESONCZDNKVKSPSUUYBTDRVAIFGFYXKYRSBOFHYSQNYBQWPRQV99GBRNXWNHBEWTEECUTWPYCEGNQVBXDHLTFLVROOWHYX9TVGZVVFAZJZONCLNTEFZRBPCWPGPIKNQLQMZE9Q9CPPROOMR9QSRSRBSGMFMQ9NX9DNOOGSYRECEADHOVEBOBJTVARVDQYV9PHSDFFQODUISDRWUTAFLGQJNFIAOHOMBNPVTILCSMRTZUTPHYV9NGLXCJKKUPBOJDBDG9OSBCFHUJDXZBSBNLEKWCYPVINVRNWSDDMDPRTYHOSTSADVDRWEXPROSUYPVYNVKOBZDXUAKKVIJQKZE9JZN9EVUG9LTFDANQMUBRXBHAPL9USL9INWZCVCBFPKACSNYSOITLJAWIMCTNSCHQ9JZMYMPRGKQLABOLIEORLCNBJQMFMEAUONZMWKAT9ECRHNIRFSFRIHMGZISIJMOT9HLMOVUOGNTBXHHFZNGFLITAQRCAGBFBFOBBSTYSZMQPV99999999999999999999DOMIOTATESTWOW9999999999999PUPOYVD99A99999999C99999999MZWEZVBGFKSBSHDXAVGAJEUHCSKSRJSHCGRGGOKIPWMPTKSIHRFBEBWWYOSUGME9THEKAFFOORCRADGAKEA9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999";
		if (!doTestMiner(in, out, iotacurl, 0))
		{
			return EXIT_FAILURE;
		}
	}

	{
		IotaCurlMiner iotacurl;
		const std::string in  = "XWGITHVPWBSPFRNQUEYLQETIVCJKRIIDKUZ9CSXBH9BKKUZCOGNLPKZXZHEGGPPWLMQHKDDAHZBSFQTNCOEJMSOLMHRPRHNWEUUAEHJURKTFWZQPSBOJGCJHWUPQSYKTVLVFKFMNQWQ9DJPBFJGXKKPYRDXDRYFBY9BIGHEYNTX9VGJTCIRVYIQHPCMCIESIUCGKMMIWHBLNC9BC9JR9CLYCPZTXPNQJOXPUDJUZEQTGWVOIEWCHPAY9EPZYCHFRQPHRZ9UZACWRJBSMRKBC9JJQSHJHPPEEYBFPHTZRGVVLJHDZ9JGLXJARNHMLWIYSUXNXRALYCMPMYOAMCKWHKNNWZPYNFTOUQORGVJRTVUYG9MX9DHLGHXFATETWQJUFPL9FLVRKEXDMVWQJOLTIXHJKBDGAJPJAHPQHT9TMWIL9QNIUQ9FBIIFDA9GUPVKXRPDRHG9IAHPJI9JRMTBJYOGVP9HZM9PNWXNFKKBSFQCOEDPDAUNEZRAYCAMBZBDVTDCANUNGZTAOAXFEUMQMSCOQF9EEVXXTXEB9IVY9DVGHBEXHMDHGJXUMIDIDIPDIAPAOGEKLVBTUFTFRRSKSAXTONHVCLGYOUUKORNGKABDQBTDSPZOWK9QD9VCKTOGMYGIHZ9YT9WYHDONULDLLSILTEUGRLKRAQFXAXNDRGECKTAERXMYOMDADLSPIVLWWNMQQBY9FHRB9LOKZNVUNVHT9I9IOLGHXOTBGAVNMR9QFCDPLDGVFGTLAEOEIDXAPSFNHJIBLMXEDLQQBGEUYKLMKRGVFFJ9AFEFILQBRWHWOOVECRMRQTSEIUHDGXRJFVZXBXSTMQA9KDIEUF9HZXYRZVZYVVEPSKDGEYWBVSEVMUDJSGYIHTPNSPWWDFII9VHAPTJHWXOWTWWSVEEKIXXUPRTTIIOEOQHHROGJIZ9Y9DSQRUVDTDHFBZMIAFTYOBJUBCOFMDTOVDWRSGCIEE9YKJCTJFZGLTFNZHNNPSKDHZZUCNDSJN9RBUOR9MYHNVLTZR9ZPHLCGXUOMGLRXCNKYMPKUFITURZCHHRKNGUZHWV9EQGNEBEXPMIRAZC9JMQL9BMDWK9NXRDEVUETPKINKDQNIJ9GJNQZJEPBDIVBJIXQWYAZCMEKFD9RFA9HUXCUBHAAVPOBRVFXRNEXDNTAIFTYEZADSWMXWEHSUKDVCCMATIDCIOFUVQYNMOXKVIDNXLGUCKQN9WVJDMHRXTHVRSHJTYFUOGKTSTDXYLM9EGYYUPMBA9JASZKKPDATFKNGLUD9IQLWFRPYQYSENKYIVXICCIOTATRVUSDKCYUA9JRUMSTMMBBHFZVCPJICNRGQZIGHEFGFMXV9VBMBMLEFJSGRDNBVODMLKCOIGDIYGCQCAUDJNVBFZGMFBV9TGOWKIFIPUOKIMJNQEBWPYVFXHCKOULMPMBN9QKWGXNM9HOJOSBJDNJJKDJWKJUWVAHNJIORACILRICNHQOQNAA9UIUTABUYOCRHLSNEKKF9BJZKX9VCAOPXOUGYFLWDZYXRVMHAXTCGJFQFOMJMSHRICSYVLSHKYWPTRLXMN9TTNBZLUTLXIDHUDTOIJAYPJ9I9JRFAHT9WOLXSJ9LOKCFXGQFZWJKNEJWURGSNBVCZYAUOBDVANKBTDCEU9W9JDIYAYVGPNGAF9WFFJL9NEYEPMJQLIMDWDVNRXOSZQAGISZIBUKTNDUHVNHOCQ9EIMWSKLREYSAKEVPUYZKMSCEGCRZVBNXXXJSEBSESONCZDNKVKSPSUUYBTDRVAIFGFYXKYRSBOFHYSQNYBQWPRQV99GBRNXWNHBEWTEECUTWPYCEGNQVBXDHLTFLVROOWHYX9TVGZVVFAZJZONCLNTEFZRBPCWPGPIKNQLQMZE9Q9CPPROOMR9QSRSRBSGMFMQ9NX9DNOOGSYRECEADHOVEBOBJTVARVDQYV9PHSDFFQODUISDRWUTAFLGQJNFIAOHOMBNPVTILCSMRTZUTPHYV9NGLXCJKKUPBOJDBDG9OSBCFHUJDXZBSBNLEKWCYPVINVRNWSDDMDPRTYHOSTSADVDRWEXPROSUYPVYNVKOBZDXUAKKVIJQKZE9JZN9EVUG9LTFDANQMUBRXBHAPL9USL9INWZCVCBFPKACSNYSOITLJAWIMCTNSCHQ9JZMYMPRGKQLABOLIEORLCNBJQMFMEAUONZMWKAT9ECRHNIRFSFRIHMGZISIJMOT9HLMOVUOGNTBXHHFZNGFLITAQRCAGBFBFOBBSTYSZMQPV99999999999999999999DOMIOTATESTWOW9999999999999PUPOYVD99A99999999C99999999MZWEZVBGFKSBSHDXAVGAJEUHCSKSRJSHCGRGGOKIPWMPTKSIHRFBEBWWYOSUGME9THEKAFFOORCRADGAK999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999";
		const std::string out = "XWGITHVPWBSPFRNQUEYLQETIVCJKRIIDKUZ9CSXBH9BKKUZCOGNLPKZXZHEGGPPWLMQHKDDAHZBSFQTNCOEJMSOLMHRPRHNWEUUAEHJURKTFWZQPSBOJGCJHWUPQSYKTVLVFKFMNQWQ9DJPBFJGXKKPYRDXDRYFBY9BIGHEYNTX9VGJTCIRVYIQHPCMCIESIUCGKMMIWHBLNC9BC9JR9CLYCPZTXPNQJOXPUDJUZEQTGWVOIEWCHPAY9EPZYCHFRQPHRZ9UZACWRJBSMRKBC9JJQSHJHPPEEYBFPHTZRGVVLJHDZ9JGLXJARNHMLWIYSUXNXRALYCMPMYOAMCKWHKNNWZPYNFTOUQORGVJRTVUYG9MX9DHLGHXFATETWQJUFPL9FLVRKEXDMVWQJOLTIXHJKBDGAJPJAHPQHT9TMWIL9QNIUQ9FBIIFDA9GUPVKXRPDRHG9IAHPJI9JRMTBJYOGVP9HZM9PNWXNFKKBSFQCOEDPDAUNEZRAYCAMBZBDVTDCANUNGZTAOAXFEUMQMSCOQF9EEVXXTXEB9IVY9DVGHBEXHMDHGJXUMIDIDIPDIAPAOGEKLVBTUFTFRRSKSAXTONHVCLGYOUUKORNGKABDQBTDSPZOWK9QD9VCKTOGMYGIHZ9YT9WYHDONULDLLSILTEUGRLKRAQFXAXNDRGECKTAERXMYOMDADLSPIVLWWNMQQBY9FHRB9LOKZNVUNVHT9I9IOLGHXOTBGAVNMR9QFCDPLDGVFGTLAEOEIDXAPSFNHJIBLMXEDLQQBGEUYKLMKRGVFFJ9AFEFILQBRWHWOOVECRMRQTSEIUHDGXRJFVZXBXSTMQA9KDIEUF9HZXYRZVZYVVEPSKDGEYWBVSEVMUDJSGYIHTPNSPWWDFII9VHAPTJHWXOWTWWSVEEKIXXUPRTTIIOEOQHHROGJIZ9Y9DSQRUVDTDHFBZMIAFTYOBJUBCOFMDTOVDWRSGCIEE9YKJCTJFZGLTFNZHNNPSKDHZZUCNDSJN9RBUOR9MYHNVLTZR9ZPHLCGXUOMGLRXCNKYMPKUFITURZCHHRKNGUZHWV9EQGNEBEXPMIRAZC9JMQL9BMDWK9NXRDEVUETPKINKDQNIJ9GJNQZJEPBDIVBJIXQWYAZCMEKFD9RFA9HUXCUBHAAVPOBRVFXRNEXDNTAIFTYEZADSWMXWEHSUKDVCCMATIDCIOFUVQYNMOXKVIDNXLGUCKQN9WVJDMHRXTHVRSHJTYFUOGKTSTDXYLM9EGYYUPMBA9JASZKKPDATFKNGLUD9IQLWFRPYQYSENKYIVXICCIOTATRVUSDKCYUA9JRUMSTMMBBHFZVCPJICNRGQZIGHEFGFMXV9VBMBMLEFJSGRDNBVODMLKCOIGDIYGCQCAUDJNVBFZGMFBV9TGOWKIFIPUOKIMJNQEBWPYVFXHCKOULMPMBN9QKWGXNM9HOJOSBJDNJJKDJWKJUWVAHNJIORACILRICNHQOQNAA9UIUTABUYOCRHLSNEKKF9BJZKX9VCAOPXOUGYFLWDZYXRVMHAXTCGJFQFOMJMSHRICSYVLSHKYWPTRLXMN9TTNBZLUTLXIDHUDTOIJAYPJ9I9JRFAHT9WOLXSJ9LOKCFXGQFZWJKNEJWURGSNBVCZYAUOBDVANKBTDCEU9W9JDIYAYVGPNGAF9WFFJL9NEYEPMJQLIMDWDVNRXOSZQAGISZIBUKTNDUHVNHOCQ9EIMWSKLREYSAKEVPUYZKMSCEGCRZVBNXXXJSEBSESONCZDNKVKSPSUUYBTDRVAIFGFYXKYRSBOFHYSQNYBQWPRQV99GBRNXWNHBEWTEECUTWPYCEGNQVBXDHLTFLVROOWHYX9TVGZVVFAZJZONCLNTEFZRBPCWPGPIKNQLQMZE9Q9CPPROOMR9QSRSRBSGMFMQ9NX9DNOOGSYRECEADHOVEBOBJTVARVDQYV9PHSDFFQODUISDRWUTAFLGQJNFIAOHOMBNPVTILCSMRTZUTPHYV9NGLXCJKKUPBOJDBDG9OSBCFHUJDXZBSBNLEKWCYPVINVRNWSDDMDPRTYHOSTSADVDRWEXPROSUYPVYNVKOBZDXUAKKVIJQKZE9JZN9EVUG9LTFDANQMUBRXBHAPL9USL9INWZCVCBFPKACSNYSOITLJAWIMCTNSCHQ9JZMYMPRGKQLABOLIEORLCNBJQMFMEAUONZMWKAT9ECRHNIRFSFRIHMGZISIJMOT9HLMOVUOGNTBXHHFZNGFLITAQRCAGBFBFOBBSTYSZMQPV99999999999999999999DOMIOTATESTWOW9999999999999PUPOYVD99A99999999C99999999MZWEZVBGFKSBSHDXAVGAJEUHCSKSRJSHCGRGGOKIPWMPTKSIHRFBEBWWYOSUGME9THEKAFFOORCRADGAKAUA999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999";
		if (!doTestMiner(in, out, iotacurl, 5))
		{
			return EXIT_FAILURE;
		}
	}	

	{
		IotaCurlMiner iotacurl;
		const std::string in  = "XWGITHVPWBSPFRNQUEYLQETIVCJKRIIDKUZ9CSXBH9BKKUZCOGNLPKZXZHEGGPPWLMQHKDDAHZBSFQTNCOEJMSOLMHRPRHNWEUUAEHJURKTFWZQPSBOJGCJHWUPQSYKTVLVFKFMNQWQ9DJPBFJGXKKPYRDXDRYFBY9BIGHEYNTX9VGJTCIRVYIQHPCMCIESIUCGKMMIWHBLNC9BC9JR9CLYCPZTXPNQJOXPUDJUZEQTGWVOIEWCHPAY9EPZYCHFRQPHRZ9UZACWRJBSMRKBC9JJQSHJHPPEEYBFPHTZRGVVLJHDZ9JGLXJARNHMLWIYSUXNXRALYCMPMYOAMCKWHKNNWZPYNFTOUQORGVJRTVUYG9MX9DHLGHXFATETWQJUFPL9FLVRKEXDMVWQJOLTIXHJKBDGAJPJAHPQHT9TMWIL9QNIUQ9FBIIFDA9GUPVKXRPDRHG9IAHPJI9JRMTBJYOGVP9HZM9PNWXNFKKBSFQCOEDPDAUNEZRAYCAMBZBDVTDCANUNGZTAOAXFEUMQMSCOQF9EEVXXTXEB9IVY9DVGHBEXHMDHGJXUMIDIDIPDIAPAOGEKLVBTUFTFRRSKSAXTONHVCLGYOUUKORNGKABDQBTDSPZOWK9QD9VCKTOGMYGIHZ9YT9WYHDONULDLLSILTEUGRLKRAQFXAXNDRGECKTAERXMYOMDADLSPIVLWWNMQQBY9FHRB9LOKZNVUNVHT9I9IOLGHXOTBGAVNMR9QFCDPLDGVFGTLAEOEIDXAPSFNHJIBLMXEDLQQBGEUYKLMKRGVFFJ9AFEFILQBRWHWOOVECRMRQTSEIUHDGXRJFVZXBXSTMQA9KDIEUF9HZXYRZVZYVVEPSKDGEYWBVSEVMUDJSGYIHTPNSPWWDFII9VHAPTJHWXOWTWWSVEEKIXXUPRTTIIOEOQHHROGJIZ9Y9DSQRUVDTDHFBZMIAFTYOBJUBCOFMDTOVDWRSGCIEE9YKJCTJFZGLTFNZHNNPSKDHZZUCNDSJN9RBUOR9MYHNVLTZR9ZPHLCGXUOMGLRXCNKYMPKUFITURZCHHRKNGUZHWV9EQGNEBEXPMIRAZC9JMQL9BMDWK9NXRDEVUETPKINKDQNIJ9GJNQZJEPBDIVBJIXQWYAZCMEKFD9RFA9HUXCUBHAAVPOBRVFXRNEXDNTAIFTYEZADSWMXWEHSUKDVCCMATIDCIOFUVQYNMOXKVIDNXLGUCKQN9WVJDMHRXTHVRSHJTYFUOGKTSTDXYLM9EGYYUPMBA9JASZKKPDATFKNGLUD9IQLWFRPYQYSENKYIVXICCIOTATRVUSDKCYUA9JRUMSTMMBBHFZVCPJICNRGQZIGHEFGFMXV9VBMBMLEFJSGRDNBVODMLKCOIGDIYGCQCAUDJNVBFZGMFBV9TGOWKIFIPUOKIMJNQEBWPYVFXHCKOULMPMBN9QKWGXNM9HOJOSBJDNJJKDJWKJUWVAHNJIORACILRICNHQOQNAA9UIUTABUYOCRHLSNEKKF9BJZKX9VCAOPXOUGYFLWDZYXRVMHAXTCGJFQFOMJMSHRICSYVLSHKYWPTRLXMN9TTNBZLUTLXIDHUDTOIJAYPJ9I9JRFAHT9WOLXSJ9LOKCFXGQFZWJKNEJWURGSNBVCZYAUOBDVANKBTDCEU9W9JDIYAYVGPNGAF9WFFJL9NEYEPMJQLIMDWDVNRXOSZQAGISZIBUKTNDUHVNHOCQ9EIMWSKLREYSAKEVPUYZKMSCEGCRZVBNXXXJSEBSESONCZDNKVKSPSUUYBTDRVAIFGFYXKYRSBOFHYSQNYBQWPRQV99GBRNXWNHBEWTEECUTWPYCEGNQVBXDHLTFLVROOWHYX9TVGZVVFAZJZONCLNTEFZRBPCWPGPIKNQLQMZE9Q9CPPROOMR9QSRSRBSGMFMQ9NX9DNOOGSYRECEADHOVEBOBJTVARVDQYV9PHSDFFQODUISDRWUTAFLGQJNFIAOHOMBNPVTILCSMRTZUTPHYV9NGLXCJKKUPBOJDBDG9OSBCFHUJDXZBSBNLEKWCYPVINVRNWSDDMDPRTYHOSTSADVDRWEXPROSUYPVYNVKOBZDXUAKKVIJQKZE9JZN9EVUG9LTFDANQMUBRXBHAPL9USL9INWZCVCBFPKACSNYSOITLJAWIMCTNSCHQ9JZMYMPRGKQLABOLIEORLCNBJQMFMEAUONZMWKAT9ECRHNIRFSFRIHMGZISIJMOT9HLMOVUOGNTBXHHFZNGFLITAQRCAGBFBFOBBSTYSZMQPV99999999999999999999DOMIOTATESTWOW9999999999999PUPOYVD99A99999999C99999999MZWEZVBGFKSBSHDXAVGAJEUHCSKSRJSHCGRGGOKIPWMPTKSIHRFBEBWWYOSUGME9THEKAFFOORCRADGAK999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999";
		const std::string out = "XWGITHVPWBSPFRNQUEYLQETIVCJKRIIDKUZ9CSXBH9BKKUZCOGNLPKZXZHEGGPPWLMQHKDDAHZBSFQTNCOEJMSOLMHRPRHNWEUUAEHJURKTFWZQPSBOJGCJHWUPQSYKTVLVFKFMNQWQ9DJPBFJGXKKPYRDXDRYFBY9BIGHEYNTX9VGJTCIRVYIQHPCMCIESIUCGKMMIWHBLNC9BC9JR9CLYCPZTXPNQJOXPUDJUZEQTGWVOIEWCHPAY9EPZYCHFRQPHRZ9UZACWRJBSMRKBC9JJQSHJHPPEEYBFPHTZRGVVLJHDZ9JGLXJARNHMLWIYSUXNXRALYCMPMYOAMCKWHKNNWZPYNFTOUQORGVJRTVUYG9MX9DHLGHXFATETWQJUFPL9FLVRKEXDMVWQJOLTIXHJKBDGAJPJAHPQHT9TMWIL9QNIUQ9FBIIFDA9GUPVKXRPDRHG9IAHPJI9JRMTBJYOGVP9HZM9PNWXNFKKBSFQCOEDPDAUNEZRAYCAMBZBDVTDCANUNGZTAOAXFEUMQMSCOQF9EEVXXTXEB9IVY9DVGHBEXHMDHGJXUMIDIDIPDIAPAOGEKLVBTUFTFRRSKSAXTONHVCLGYOUUKORNGKABDQBTDSPZOWK9QD9VCKTOGMYGIHZ9YT9WYHDONULDLLSILTEUGRLKRAQFXAXNDRGECKTAERXMYOMDADLSPIVLWWNMQQBY9FHRB9LOKZNVUNVHT9I9IOLGHXOTBGAVNMR9QFCDPLDGVFGTLAEOEIDXAPSFNHJIBLMXEDLQQBGEUYKLMKRGVFFJ9AFEFILQBRWHWOOVECRMRQTSEIUHDGXRJFVZXBXSTMQA9KDIEUF9HZXYRZVZYVVEPSKDGEYWBVSEVMUDJSGYIHTPNSPWWDFII9VHAPTJHWXOWTWWSVEEKIXXUPRTTIIOEOQHHROGJIZ9Y9DSQRUVDTDHFBZMIAFTYOBJUBCOFMDTOVDWRSGCIEE9YKJCTJFZGLTFNZHNNPSKDHZZUCNDSJN9RBUOR9MYHNVLTZR9ZPHLCGXUOMGLRXCNKYMPKUFITURZCHHRKNGUZHWV9EQGNEBEXPMIRAZC9JMQL9BMDWK9NXRDEVUETPKINKDQNIJ9GJNQZJEPBDIVBJIXQWYAZCMEKFD9RFA9HUXCUBHAAVPOBRVFXRNEXDNTAIFTYEZADSWMXWEHSUKDVCCMATIDCIOFUVQYNMOXKVIDNXLGUCKQN9WVJDMHRXTHVRSHJTYFUOGKTSTDXYLM9EGYYUPMBA9JASZKKPDATFKNGLUD9IQLWFRPYQYSENKYIVXICCIOTATRVUSDKCYUA9JRUMSTMMBBHFZVCPJICNRGQZIGHEFGFMXV9VBMBMLEFJSGRDNBVODMLKCOIGDIYGCQCAUDJNVBFZGMFBV9TGOWKIFIPUOKIMJNQEBWPYVFXHCKOULMPMBN9QKWGXNM9HOJOSBJDNJJKDJWKJUWVAHNJIORACILRICNHQOQNAA9UIUTABUYOCRHLSNEKKF9BJZKX9VCAOPXOUGYFLWDZYXRVMHAXTCGJFQFOMJMSHRICSYVLSHKYWPTRLXMN9TTNBZLUTLXIDHUDTOIJAYPJ9I9JRFAHT9WOLXSJ9LOKCFXGQFZWJKNEJWURGSNBVCZYAUOBDVANKBTDCEU9W9JDIYAYVGPNGAF9WFFJL9NEYEPMJQLIMDWDVNRXOSZQAGISZIBUKTNDUHVNHOCQ9EIMWSKLREYSAKEVPUYZKMSCEGCRZVBNXXXJSEBSESONCZDNKVKSPSUUYBTDRVAIFGFYXKYRSBOFHYSQNYBQWPRQV99GBRNXWNHBEWTEECUTWPYCEGNQVBXDHLTFLVROOWHYX9TVGZVVFAZJZONCLNTEFZRBPCWPGPIKNQLQMZE9Q9CPPROOMR9QSRSRBSGMFMQ9NX9DNOOGSYRECEADHOVEBOBJTVARVDQYV9PHSDFFQODUISDRWUTAFLGQJNFIAOHOMBNPVTILCSMRTZUTPHYV9NGLXCJKKUPBOJDBDG9OSBCFHUJDXZBSBNLEKWCYPVINVRNWSDDMDPRTYHOSTSADVDRWEXPROSUYPVYNVKOBZDXUAKKVIJQKZE9JZN9EVUG9LTFDANQMUBRXBHAPL9USL9INWZCVCBFPKACSNYSOITLJAWIMCTNSCHQ9JZMYMPRGKQLABOLIEORLCNBJQMFMEAUONZMWKAT9ECRHNIRFSFRIHMGZISIJMOT9HLMOVUOGNTBXHHFZNGFLITAQRCAGBFBFOBBSTYSZMQPV99999999999999999999DOMIOTATESTWOW9999999999999PUPOYVD99A99999999C99999999MZWEZVBGFKSBSHDXAVGAJEUHCSKSRJSHCGRGGOKIPWMPTKSIHRFBEBWWYOSUGME9THEKAFFOORCRADGAKADQA99999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999";
		if (!doTestMiner(in, out, iotacurl, 9))
		{
			return EXIT_FAILURE;
		}
	}

	return EXIT_SUCCESS;
}
